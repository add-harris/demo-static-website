steps:
  - name: 'adamharrison/binxly-utils'
    entrypoint: npm
    args: ['install']
  - name: 'adamharrison/binxly-utils'
    entrypoint: npm
    args: ['run', 'generate']
  - name: 'adamharrison/binxly-utils'
    entrypoint: 'gsutil'
    args: ['mb', '-l', 'europe-west2', 'gs://www.binxly.net']
  - name: 'adamharrison/binxly-utils'
    entrypoint: 'gsutil'
    args: ['rsync', '-R', 'dist', 'gs://www.binxly.net']
  - name: 'adamharrison/binxly-utils'
    entrypoint: 'gsutil'
    args: ['iam', 'ch', 'allUsers:objectViewer', 'gs://www.binxly.net']
  - name: 'adamharrison/binxly-utils'
    entrypoint: 'gsutil'
    args: ['web', 'set', '-m', 'index.html', '-e', '404.html', 'gs://www.binxly.net']

#  gsutil acl ch -u AllUsers:R gs://example-bucket/example-object
#  gsutil web set -m index.html -e 404.html gs://www.example.com

# config for build and deploy to firebase

#  - name: node
#    entrypoint: npm
#    args: ['install']
#  - name: node
#    entrypoint: npm
#    args: ['run', 'generate']
#  - name: adamharrison/firebase-cli
#    args: ['deploy', '--project=$PROJECT_ID', '--only=hosting']


# trial config for dynamic firebase deploy

#  - name: adamharrison/firebase-cli
#    entrypoint: 'bash'
#    args: ['/create-app.sh', '$BUILD_ID']

## after app:create need to catch APP-ID
## then firebase apps:sdkconfig -o appconfig WEB APP-ID
## writes config appconfig file
## need to feed into nuxt.config.js
